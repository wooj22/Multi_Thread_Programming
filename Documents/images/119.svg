<svg viewBox="0 0 1100 700" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="problemGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F44336;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#D32F2F;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="solutionGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4CAF50;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#388E3C;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="crtGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#2196F3;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1976D2;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="memoryGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FF9800;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#F57C00;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="3" dy="3" stdDeviation="3" flood-color="#00000030"/>
    </filter>
  </defs>
  
  <!-- 배경 -->
  <rect width="1100" height="700" fill="#f8f9fa"/>
  
  <!-- 제목 -->
  <text x="550" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#333">
    CreateThread와 C 런타임 호환성 문제
  </text>
  
  <!-- 문제 상황 -->
  <rect x="50" y="60" width="1000" height="120" rx="10" fill="url(#problemGradient)" opacity="0.1" stroke="#F44336" stroke-width="2" filter="url(#shadow)"/>
  <text x="550" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#D32F2F">
    주요 문제점들
  </text>
  
  <g transform="translate(80, 100)">
    <circle cx="8" cy="8" r="6" fill="#F44336"/>
    <text x="25" y="13" font-family="Arial, sans-serif" font-size="12" fill="#333">
      <tspan font-weight="bold">C 런타임 초기화 누락:</tspan> CreateThread로 생성된 스레드는 C 런타임이 초기화되지 않음
    </text>
  </g>
  
  <g transform="translate(80, 125)">
    <circle cx="8" cy="8" r="6" fill="#F44336"/>
    <text x="25" y="13" font-family="Arial, sans-serif" font-size="12" fill="#333">
      <tspan font-weight="bold">메모리 관리 문제:</tspan> malloc/free, new/delete 등의 힙 관리자가 제대로 동작하지 않을 수 있음
    </text>
  </g>
  
  <g transform="translate(80, 150)">
    <circle cx="8" cy="8" r="6" fill="#F44336"/>
    <text x="25" y="13" font-family="Arial, sans-serif" font-size="12" fill="#333">
      <tspan font-weight="bold">전역/정적 변수 문제:</tspan> 스레드별 전역 변수나 정적 변수의 초기화가 누락될 수 있음
    </text>
  </g>
  
  <!-- CreateThread 동작 방식 -->
  <rect x="50" y="200" width="500" height="180" rx="10" fill="#FFEBEE" opacity="0.8" filter="url(#shadow)"/>
  <text x="300" y="225" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#D32F2F">
    CreateThread 방식 (문제 있음)
  </text>
  
  <!-- 프로세스 메모리 -->
  <rect x="80" y="240" width="200" height="120" rx="8" fill="white" stroke="#F44336" stroke-width="2"/>
  <text x="180" y="260" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">
    프로세스 메모리
  </text>
  
  <!-- 메인 스레드 -->
  <rect x="100" y="270" width="80" height="40" rx="5" fill="#4CAF50" opacity="0.8"/>
  <text x="140" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">
    메인 스레드
  </text>
  <text x="140" y="300" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">
    CRT 초기화됨
  </text>
  
  <!-- CreateThread로 생성된 스레드 -->
  <rect x="190" y="270" width="80" height="40" rx="5" fill="#F44336" opacity="0.8"/>
  <text x="230" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">
    CreateThread
  </text>
  <text x="230" y="300" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">
    CRT 초기화 안됨
  </text>
  
  <!-- C 런타임 라이브러리 -->
  <rect x="100" y="320" width="160" height="30" rx="5" fill="url(#crtGradient)" opacity="0.6"/>
  <text x="180" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">
    C 런타임 라이브러리 (CRT)
  </text>
  
  <!-- 문제 상황 표시 -->
  <g stroke="#F44336" stroke-width="3" stroke-dasharray="5,3" fill="none">
    <path d="M 230 310 L 230 320"/>
    <circle cx="230" cy="315" r="3" fill="#F44336"/>
  </g>
  <text x="320" y="295" font-family="Arial, sans-serif" font-size="10" fill="#F44336" font-weight="bold">
    ❌ CRT 함수 사용 시
  </text>
  <text x="320" y="310" font-family="Arial, sans-serif" font-size="10" fill="#F44336">
    메모리 누수, 크래시 발생 가능
  </text>
  
  <!-- _beginthreadex 방식 -->
  <rect x="580" y="200" width="470" height="180" rx="10" fill="#E8F5E8" opacity="0.8" filter="url(#shadow)"/>
  <text x="815" y="225" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#388E3C">
    _beginthreadex 방식 (올바름)
  </text>
  
  <!-- 프로세스 메모리 -->
  <rect x="610" y="240" width="200" height="120" rx="8" fill="white" stroke="#4CAF50" stroke-width="2"/>
  <text x="710" y="260" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">
    프로세스 메모리
  </text>
  
  <!-- 메인 스레드 -->
  <rect x="630" y="270" width="80" height="40" rx="5" fill="#4CAF50" opacity="0.8"/>
  <text x="670" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">
    메인 스레드
  </text>
  <text x="670" y="300" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">
    CRT 초기화됨
  </text>
  
  <!-- _beginthreadex로 생성된 스레드 -->
  <rect x="720" y="270" width="80" height="40" rx="5" fill="#4CAF50" opacity="0.8"/>
  <text x="760" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">
    _beginthreadex
  </text>
  <text x="760" y="300" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">
    CRT 초기화됨
  </text>
  
  <!-- C 런타임 라이브러리 -->
  <rect x="630" y="320" width="160" height="30" rx="5" fill="url(#crtGradient)" opacity="0.8"/>
  <text x="710" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">
    C 런타임 라이브러리 (CRT)
  </text>
  
  <!-- 정상 연결 표시 -->
  <g stroke="#4CAF50" stroke-width="3" fill="none">
    <path d="M 760 310 L 760 320"/>
  </g>
  <text x="850" y="295" font-family="Arial, sans-serif" font-size="10" fill="#4CAF50" font-weight="bold">
    ✓ CRT 함수 안전 사용
  </text>
  <text x="850" y="310" font-family="Arial, sans-serif" font-size="10" fill="#4CAF50">
    메모리 관리 정상 동작
  </text>
  
  <!-- 구체적인 문제 예시 -->
  <rect x="50" y="400" width="1000" height="150" rx="10" fill="#FFF3E0" opacity="0.8" filter="url(#shadow)"/>
  <text x="550" y="425" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#F57C00">
    발생 가능한 구체적인 문제들
  </text>
  
  <g transform="translate(80, 445)">
    <rect x="0" y="0" width="220" height="80" rx="5" fill="#F44336" opacity="0.1" stroke="#F44336" stroke-width="1"/>
    <text x="110" y="18" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#D32F2F">
      메모리 관리 오류
    </text>
    <text x="10" y="35" font-family="Arial, sans-serif" font-size="10" fill="#333">• malloc/free 호출 시 크래시</text>
    <text x="10" y="50" font-family="Arial, sans-serif" font-size="10" fill="#333">• new/delete 연산자 오작동</text>
    <text x="10" y="65" font-family="Arial, sans-serif" font-size="10" fill="#333">• 힙 손상 및 메모리 누수</text>
  </g>
  
  <g transform="translate(320, 445)">
    <rect x="0" y="0" width="220" height="80" rx="5" fill="#F44336" opacity="0.1" stroke="#F44336" stroke-width="1"/>
    <text x="110" y="18" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#D32F2F">
      표준 라이브러리 문제
    </text>
    <text x="10" y="35" font-family="Arial, sans-serif" font-size="10" fill="#333">• printf, scanf 등 출력 함수 오류</text>
    <text x="10" y="50" font-family="Arial, sans-serif" font-size="10" fill="#333">• 파일 I/O 함수 비정상 동작</text>
    <text x="10" y="65" font-family="Arial, sans-serif" font-size="10" fill="#333">• 문자열 처리 함수 문제</text>
  </g>
  
  <g transform="translate(560, 445)">
    <rect x="0" y="0" width="220" height="80" rx="5" fill="#F44336" opacity="0.1" stroke="#F44336" stroke-width="1"/>
    <text x="110" y="18" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#D32F2F">
      전역 변수 초기화
    </text>
    <text x="10" y="35" font-family="Arial, sans-serif" font-size="10" fill="#333">• 정적 변수 초기화 누락</text>
    <text x="10" y="50" font-family="Arial, sans-serif" font-size="10" fill="#333">• 전역 객체 생성자 미호출</text>
    <text x="10" y="65" font-family="Arial, sans-serif" font-size="10" fill="#333">• TLS(Thread Local Storage) 문제</text>
  </g>
  
  <g transform="translate(800, 445)">
    <rect x="0" y="0" width="220" height="80" rx="5" fill="#F44336" opacity="0.1" stroke="#F44336" stroke-width="1"/>
    <text x="110" y="18" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#D32F2F">
      예외 처리 문제
    </text>
    <text x="10" y="35" font-family="Arial, sans-serif" font-size="10" fill="#333">• C++ 예외 처리 불가</text>
    <text x="10" y="50" font-family="Arial, sans-serif" font-size="10" fill="#333">• SEH 구조화 예외 문제</text>
    <text x="10" y="65" font-family="Arial, sans-serif" font-size="10" fill="#333">• 스택 언와인딩 실패</text>
  </g>
  
  <!-- 해결책 -->
  <rect x="50" y="570" width="1000" height="100" rx="10" fill="url(#solutionGradient)" opacity="0.1" stroke="#4CAF50" stroke-width="2" filter="url(#shadow)"/>
  <text x="550" y="595" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#388E3C">
    해결책
  </text>
  
  <g transform="translate(80, 610)">
    <circle cx="8" cy="8" r="6" fill="#4CAF50"/>
    <text x="25" y="13" font-family="Arial, sans-serif" font-size="12" fill="#333">
      <tspan font-weight="bold">_beginthreadex 사용:</tspan> C 런타임에서 제공하는 스레드 생성 함수 사용
    </text>
  </g>
  
  <g transform="translate(80, 635)">
    <circle cx="8" cy="8" r="6" fill="#4CAF50"/>
    <text x="25" y="13" font-family="Arial, sans-serif" font-size="12" fill="#333">
      <tspan font-weight="bold">std::thread 사용:</tspan> C++11 이후 표준 라이브러리의 스레드 클래스 사용 (가장 권장)
    </text>
  </g>
  
  <g transform="translate(80, 660)">
    <circle cx="8" cy="8" r="6" fill="#4CAF50"/>
    <text x="25" y="13" font-family="Arial, sans-serif" font-size="12" fill="#333">
      <tspan font-weight="bold">스레드 풀 사용:</tspan> Windows Thread Pool API나 C++ 라이브러리의 스레드 풀 활용
    </text>
  </g>
</svg>